services:
  labos:
    container_name: labos-dev
    build:
      context: .
      dockerfile: Dockerfile
    image: labos-dev:latest
    ports:
      - "8501:8501"
    volumes:
      - .:/labos
    environment:
      - LABOS_USE_STORE=1

  docker-scout:
    container_name: labos-scout
    image: docker/scout-cli:latest
    profiles: ["security"]
    environment:
      DOCKER_SCOUT_CACHE_DIR: /tmp/scout-cache
      DOCKER_SCOUT_HUB_USER: ${DOCKER_HUB_USER:-}
      DOCKER_SCOUT_HUB_PASSWORD: ${DOCKER_HUB_PAT:-}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - .:/workspace:ro
      - scout-cache:/tmp/scout-cache

volumes:
  scout-cache:
